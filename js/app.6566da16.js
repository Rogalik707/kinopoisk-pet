(function(){"use strict";var t={8694:function(t,i,e){var s=e(9242),a=e(9877),n=e(3396);function r(t,i,e,s,a,r){const o=(0,n.up)("NavBar"),l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o),(0,n.Wm)(l)])}const o=t=>((0,n.dD)("data-v-2087c8a7"),t=t(),(0,n.Cn)(),t),l={class:"list"},c=o((()=>(0,n._)("li",{class:"link"},"Сериалы",-1)));function d(t,i){const e=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("ul",null,[(0,n.Wm)(e,{class:"link",to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("Фильмы")])),_:1}),c,(0,n.Wm)(e,{class:"link",to:"/favorites"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Моё")])),_:1}),(0,n.Wm)(e,{class:"link",to:"/account"},{default:(0,n.w5)((()=>[(0,n.Uk)("Аккаунт")])),_:1})])])}var u=e(89);const m={},f=(0,u.Z)(m,[["render",d],["__scopeId","data-v-2087c8a7"]]);var p=f,v={name:"App",components:{NavBar:p}};const h=(0,u.Z)(v,[["render",r]]);var _=h,g=e(678);const b={class:"search"},w=["disabled"],F={class:"cards-container",ref:"scrollComponent"},k={class:"observer",ref:"observer"};function y(t,i,e,a,r,o){const l=(0,n.up)("film-card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",b,[(0,n.wy)((0,n._)("input",{class:"search__input","onUpdate:modelValue":i[0]||(i[0]=t=>r.searchText=t),placeholder:"Название фильма"},null,512),[[s.nr,r.searchText]]),(0,n._)("button",{class:"search__button",onClick:i[1]||(i[1]=(...t)=>o.findFilms&&o.findFilms(...t)),disabled:r.isLoading},"Найти",8,w)]),(0,n._)("div",F,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.films,(t=>((0,n.wg)(),(0,n.j4)(l,{key:t.id,film:t,onClick:i=>o.openFilmDescription(t.id)},null,8,["film","onClick"])))),128))],512),(0,n._)("div",k,null,512)],64)}e(7658);var x=e(7139);const D={class:"card"},I={class:"card__img"},C=["src"],O={class:"card__body"},j={class:"card__title"},L={class:"description"},T={class:"card__year"},H={class:"like"};function Z(t,i,e,a,r,o){const l=(0,n.up)("svg-icon");return(0,n.wg)(),(0,n.iD)("div",D,[(0,n._)("div",I,[(0,n._)("img",{src:e.film?.primaryImage?.url},null,8,C)]),(0,n._)("div",O,[(0,n._)("div",j,[(0,n._)("h4",null,(0,x.zw)(e.film.originalTitleText.text),1)]),(0,n._)("div",L,[(0,n._)("div",T,"("+(0,x.zw)(e.film.releaseDate.year)+")",1)]),(0,n._)("div",H,[e.film?.favorite?((0,n.wg)(),(0,n.j4)(l,{key:0,class:"like",onClick:i[0]||(i[0]=(0,s.iM)((t=>o.disLikeFilm(e.film.id)),["stop"])),src:r.LikeIcon},null,8,["src"])):((0,n.wg)(),(0,n.j4)(l,{key:1,class:"like",onClick:i[1]||(i[1]=(0,s.iM)((t=>o.likeFilm(e.film.id)),["stop"])),src:r.HeartIcon},null,8,["src"]))])])])}var $=e.p+"img/heart.51d0a13a.svg",M=e.p+"img/redheart.0fbab21c.svg",P=e(1020);const q=(0,P.Q_)("film",{state:()=>({favoriteFilms:[]}),getters:{},actions:{addFavoriteFilm(t){this.favoriteFilms.push(t)},deleteFilm(t){const i=this.favoriteFilms.findIndex((i=>i===t));this.favoriteFilms.splice(i,1)}}});var A={name:"FilmCard",data(){return{HeartIcon:$,LikeIcon:M}},props:{film:{type:Object,required:!0}},methods:{...(0,P.nv)(q,["addFavoriteFilm","deleteFilm"]),likeFilm(t){this.addFavoriteFilm(t),this.$emit("onLike",t)},disLikeFilm(t){this.deleteFilm(t),this.$emit("onDislike",t)}}};const U=(0,u.Z)(A,[["render",Z],["__scopeId","data-v-b26a39e2"]]);var W=U;const Y=e(7218),z=Y.create({baseURL:"https://moviesdatabase.p.rapidapi.com",headers:{"X-RapidAPI-Key":"e6b3ada70amsh1fb3b5eaa8b96edp1f87c0jsn80262fdc1bff","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}});async function K(t){try{const i=await z.get("/titles",{params:{startYear:"2020",list:"most_pop_movies",page:t}});return i.data}catch(i){console.error(i)}}async function B(t){try{const i=await z.get(`/titles/search/title/${t}`);return i.data}catch(i){console.error(i)}}async function E(t){try{const i=await z.get("/titles/x/titles-by-ids",{params:{idsList:t.join(",")}});return i.data}catch(i){console.error(i)}}async function N(t){try{const i=await z.get(`/titles/${t}`);return i.data}catch(i){console.error(i)}}async function R(){try{const t=await z.get("/actors/random");return t.data}catch(t){console.error(t)}}var X={components:{FilmCard:W},data(){return{films:[],page:1,searchText:"",isLoading:!1}},created(){this.fetchFilms(this.page)},mounted(){const t={rootMargin:"0px",threshold:1},i=t=>{t[0].isIntersecting&&this.loadMoreFilms()},e=new IntersectionObserver(i,t);e.observe(this.$refs.observer)},methods:{async fetchFilms(t){const i=await K(t);this.films=i.results},async loadMoreFilms(){this.page+=1;const t=await K(this.page);this.films=[...this.films,...t.results]},async findFilms(){if(this.searchText){this.isLoading=!0;const t=await B(this.searchText);this.films=t.results,this.films&&(this.isLoading=!1)}},openFilmDescription(t){this.$router.push(`/films/${t}`)}}};const Q=(0,u.Z)(X,[["render",y],["__scopeId","data-v-7fbdbd36"]]);var V=Q;const G=t=>((0,n.dD)("data-v-21925946"),t=t(),(0,n.Cn)(),t),J={class:"profile"},S=G((()=>(0,n._)("div",{class:"profile__img"},null,-1))),tt={class:"profile__description"},it=G((()=>(0,n._)("h1",null,"Machen",-1))),et={class:"profile__table_box"},st=G((()=>(0,n._)("li",null,"Просмотренных фильмов: 0",-1))),at=G((()=>(0,n._)("li",null,"Просмотренных сериалов: 0",-1))),nt=G((()=>(0,n._)("li",null,"Понравившихся сериалов: 0",-1))),rt=G((()=>(0,n._)("div",{class:"watched_films"},null,-1)));function ot(t,i,e,s,a,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",J,[S,(0,n._)("div",tt,[it,(0,n._)("div",et,[(0,n._)("ul",null,[st,(0,n._)("li",null,"Понравившихся фильмов: "+(0,x.zw)(t.favoriteFilms.length),1),at,nt])])])]),rt],64)}var lt={name:"AccountPage",computed:{...(0,P.rn)(q,["favoriteFilms"])}};const ct=(0,u.Z)(lt,[["render",ot],["__scopeId","data-v-21925946"]]);var dt=ct;const ut={class:"cards-container"};function mt(t,i,e,s,a,r){const o=(0,n.up)("film-card");return(0,n.wg)(),(0,n.iD)("div",ut,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.films,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.id,film:t},null,8,["film"])))),128))])}var ft={components:{FilmCard:W},data(){return{films:[]}},mounted(){this.fetchFavoriteFilms(this.favoriteFilms)},computed:{...(0,P.rn)(q,["favoriteFilms"])},methods:{...(0,P.nv)(q,["addFavoriteFilm","deleteFilm"]),async fetchFavoriteFilms(t){const i=await E(t);this.films=i.results,this.films&&this.films.forEach((t=>t.favorite=!0))}}};const pt=(0,u.Z)(ft,[["render",mt],["__scopeId","data-v-38e33bb4"]]);var vt=pt;const ht=t=>((0,n.dD)("data-v-b608e7b8"),t=t(),(0,n.Cn)(),t),_t={class:"film"},gt={class:"film__img"},bt=["src"],wt={class:"film__text_box"},Ft={class:"film__title"},kt=ht((()=>(0,n._)("div",{class:"film__description"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",-1))),yt={class:"actors"},xt=ht((()=>(0,n._)("h3",{class:"actors__header"}," Актеры:",-1)));function Dt(t,i,e,s,a,r){return(0,n.wg)(),(0,n.iD)("div",_t,[(0,n._)("div",gt,[(0,n._)("img",{src:a.film?.primaryImage?.url},null,8,bt)]),(0,n._)("div",wt,[(0,n._)("div",Ft,[(0,n._)("h1",null,(0,x.zw)(a.film?.originalTitleText?.text),1)]),kt]),(0,n._)("div",yt,[xt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.actors,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"actors__list",key:t.nconst},(0,x.zw)(t?.primaryName),1)))),128))])])}var It={data(){return{film:{},actors:[]}},name:"DescriptionPage",created(){this.fetchFilm(),this.fetchActors()},methods:{async fetchFilm(){const t=await N(this.$route.params.id);this.film=t.results},async fetchActors(){const t=await R();this.actors=t.results}}};const Ct=(0,u.Z)(It,[["render",Dt],["__scopeId","data-v-b608e7b8"]]);var Ot=Ct;const jt=[{path:"/",component:V},{path:"/account",component:dt},{path:"/favorites",component:vt},{path:"/films/:id",component:Ot}],Lt=(0,g.p7)({routes:jt,history:(0,g.PO)("/kinopoisk-pet/")});var Tt=Lt;const Ht=(0,P.WB)(),Zt=(0,s.ri)(_);Zt.use(Tt).use(Ht).component("svg-icon",a.Z).mount("#app")}},i={};function e(s){var a=i[s];if(void 0!==a)return a.exports;var n=i[s]={exports:{}};return t[s].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(i,s,a,n){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],n=t[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(d--,1);var c=a();void 0!==c&&(i=c)}}return i}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,a,n]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){e.p="/kinopoisk-pet/"}(),function(){var t={143:0};e.O.j=function(i){return 0===t[i]};var i=function(i,s){var a,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(i){return 0!==t[i]}))){for(a in o)e.o(o,a)&&(e.m[a]=o[a]);if(l)var d=l(e)}for(i&&i(s);c<r.length;c++)n=r[c],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(d)},s=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(8694)}));s=e.O(s)})();
//# sourceMappingURL=app.6566da16.js.map