(function(){"use strict";var t={674:function(t,i,e){var s=e(9242),a=e(9877),n=e(3396);function r(t,i,e,s,a,r){const o=(0,n.up)("NavBar"),l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o),(0,n.Wm)(l)])}const o=t=>((0,n.dD)("data-v-2087c8a7"),t=t(),(0,n.Cn)(),t),l={class:"list"},c=o((()=>(0,n._)("li",{class:"link"},"Сериалы",-1)));function d(t,i){const e=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("ul",null,[(0,n.Wm)(e,{class:"link",to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("Фильмы")])),_:1}),c,(0,n.Wm)(e,{class:"link",to:"/favorites"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Моё")])),_:1}),(0,n.Wm)(e,{class:"link",to:"/account"},{default:(0,n.w5)((()=>[(0,n.Uk)("Аккаунт")])),_:1})])])}var u=e(89);const m={},f=(0,u.Z)(m,[["render",d],["__scopeId","data-v-2087c8a7"]]);var p=f,v={name:"App",components:{NavBar:p}};const h=(0,u.Z)(v,[["render",r]]);var _=h,g=e(678);const w=t=>((0,n.dD)("data-v-4147adf8"),t=t(),(0,n.Cn)(),t),b={class:"search"},F=["disabled"],k=w((()=>(0,n._)("strong",null,"Найти",-1))),y=[k],x={class:"cards-container",ref:"scrollComponent"},D={class:"observer",ref:"observer"};function I(t,i,e,a,r,o){const l=(0,n.up)("film-card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",b,[(0,n._)("form",{onSubmit:i[1]||(i[1]=(0,s.iM)(((...t)=>o.findFilms&&o.findFilms(...t)),["prevent"]))},[(0,n.wy)((0,n._)("input",{class:"search__input","onUpdate:modelValue":i[0]||(i[0]=t=>r.searchText=t),placeholder:"Название фильма"},null,512),[[s.nr,r.searchText]]),(0,n._)("button",{class:"search__button",disabled:r.isLoading},y,8,F)],32)]),(0,n._)("div",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.films,(t=>((0,n.wg)(),(0,n.j4)(l,{key:t.id,film:t,onClick:i=>o.openFilmDescription(t.id)},null,8,["film","onClick"])))),128))],512),(0,n._)("div",D,null,512)],64)}e(7658);var C=e(7139);const O={class:"card"},j={class:"card__img"},L=["src"],T={class:"card__body"},H={class:"card__title"},M={class:"description"},Z={class:"card__year"},$={class:"like"};function P(t,i,e,a,r,o){const l=(0,n.up)("svg-icon");return(0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("div",j,[(0,n._)("img",{src:e.film?.primaryImage?.url},null,8,L)]),(0,n._)("div",T,[(0,n._)("div",H,[(0,n._)("h4",null,(0,C.zw)(e.film.originalTitleText.text),1)]),(0,n._)("div",M,[(0,n._)("div",Z,"("+(0,C.zw)(e.film.releaseDate.year)+")",1)]),(0,n._)("div",$,[e.film?.favorite?((0,n.wg)(),(0,n.j4)(l,{key:0,class:"like",onClick:i[0]||(i[0]=(0,s.iM)((t=>o.disLikeFilm(e.film.id)),["stop"])),src:r.LikeIcon},null,8,["src"])):((0,n.wg)(),(0,n.j4)(l,{key:1,class:"like",onClick:i[1]||(i[1]=(0,s.iM)((t=>o.likeFilm(e.film.id)),["stop"])),src:r.HeartIcon},null,8,["src"]))])])])}var q=e.p+"img/heart.51d0a13a.svg",A=e.p+"img/redheart.0fbab21c.svg",U=e(1020);const W=(0,U.Q_)("film",{state:()=>({favoriteFilms:[]}),getters:{},actions:{addFavoriteFilm(t){this.favoriteFilms.push(t)},deleteFilm(t){const i=this.favoriteFilms.findIndex((i=>i===t));this.favoriteFilms.splice(i,1)}}});var Y={name:"FilmCard",data(){return{HeartIcon:q,LikeIcon:A}},props:{film:{type:Object,required:!0}},methods:{...(0,U.nv)(W,["addFavoriteFilm","deleteFilm"]),likeFilm(t){this.addFavoriteFilm(t),this.$emit("onLike",t)},disLikeFilm(t){this.deleteFilm(t),this.$emit("onDislike",t)}}};const z=(0,u.Z)(Y,[["render",P],["__scopeId","data-v-3d3fee12"]]);var K=z;const B=e(7218),E=B.create({baseURL:"https://moviesdatabase.p.rapidapi.com",headers:{"X-RapidAPI-Key":"e6b3ada70amsh1fb3b5eaa8b96edp1f87c0jsn80262fdc1bff","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}});async function N(t){try{const i=await E.get("/titles",{params:{startYear:"2020",list:"most_pop_movies",page:t}});return i.data}catch(i){console.error(i)}}async function R(t){try{const i=await E.get(`/titles/search/title/${t}`);return i.data}catch(i){console.error(i)}}async function X(t){try{const i=await E.get("/titles/x/titles-by-ids",{params:{idsList:t.join(",")}});return i.data}catch(i){console.error(i)}}async function Q(t){try{const i=await E.get(`/titles/${t}`);return i.data}catch(i){console.error(i)}}async function S(){try{const t=await E.get("/actors/random");return t.data}catch(t){console.error(t)}}var V={components:{FilmCard:K},data(){return{films:[],page:1,searchText:"",isLoading:!1}},created(){this.fetchFilms(this.page)},mounted(){const t={rootMargin:"0px",threshold:1},i=t=>{t[0].isIntersecting&&this.loadMoreFilms()},e=new IntersectionObserver(i,t);e.observe(this.$refs.observer)},methods:{async fetchFilms(t){const i=await N(t);this.films=i.results},async loadMoreFilms(){this.page+=1;const t=await N(this.page);this.films=[...this.films,...t.results]},async findFilms(){if(this.searchText){this.isLoading=!0;const t=await R(this.searchText);this.films=t.results,this.films&&(this.isLoading=!1)}},openFilmDescription(t){this.$router.push(`/films/${t}`)}}};const G=(0,u.Z)(V,[["render",I],["__scopeId","data-v-4147adf8"]]);var J=G;const tt=t=>((0,n.dD)("data-v-21925946"),t=t(),(0,n.Cn)(),t),it={class:"profile"},et=tt((()=>(0,n._)("div",{class:"profile__img"},null,-1))),st={class:"profile__description"},at=tt((()=>(0,n._)("h1",null,"Machen",-1))),nt={class:"profile__table_box"},rt=tt((()=>(0,n._)("li",null,"Просмотренных фильмов: 0",-1))),ot=tt((()=>(0,n._)("li",null,"Просмотренных сериалов: 0",-1))),lt=tt((()=>(0,n._)("li",null,"Понравившихся сериалов: 0",-1))),ct=tt((()=>(0,n._)("div",{class:"watched_films"},null,-1)));function dt(t,i,e,s,a,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",it,[et,(0,n._)("div",st,[at,(0,n._)("div",nt,[(0,n._)("ul",null,[rt,(0,n._)("li",null,"Понравившихся фильмов: "+(0,C.zw)(t.favoriteFilms.length),1),ot,lt])])])]),ct],64)}var ut={name:"AccountPage",computed:{...(0,U.rn)(W,["favoriteFilms"])}};const mt=(0,u.Z)(ut,[["render",dt],["__scopeId","data-v-21925946"]]);var ft=mt;const pt={class:"cards-container"};function vt(t,i,e,s,a,r){const o=(0,n.up)("film-card");return(0,n.wg)(),(0,n.iD)("div",pt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.films,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.id,film:t},null,8,["film"])))),128))])}var ht={components:{FilmCard:K},data(){return{films:[]}},mounted(){this.fetchFavoriteFilms(this.favoriteFilms)},computed:{...(0,U.rn)(W,["favoriteFilms"])},methods:{...(0,U.nv)(W,["addFavoriteFilm","deleteFilm"]),async fetchFavoriteFilms(t){const i=await X(t);this.films=i.results,this.films&&this.films.forEach((t=>t.favorite=!0))}}};const _t=(0,u.Z)(ht,[["render",vt],["__scopeId","data-v-38e33bb4"]]);var gt=_t;const wt=t=>((0,n.dD)("data-v-6597ff4a"),t=t(),(0,n.Cn)(),t),bt={class:"film"},Ft={class:"film__img"},kt=["src"],yt={class:"film__text_box"},xt={class:"film__title"},Dt=wt((()=>(0,n._)("div",{class:"film__description"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",-1))),It={class:"actors"},Ct=wt((()=>(0,n._)("h3",{class:"actors__header"}," Актеры:",-1)));function Ot(t,i,e,s,a,r){return(0,n.wg)(),(0,n.iD)("div",bt,[(0,n._)("div",Ft,[(0,n._)("img",{src:a.film?.primaryImage?.url},null,8,kt)]),(0,n._)("div",yt,[(0,n._)("div",xt,[(0,n._)("h1",null,(0,C.zw)(a.film?.originalTitleText?.text),1)]),Dt]),(0,n._)("div",It,[Ct,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.actors,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"actors__list",key:t.nconst},(0,C.zw)(t?.primaryName),1)))),128))])])}var jt={data(){return{film:{},actors:[]}},name:"DescriptionPage",created(){this.fetchFilm(),this.fetchActors()},methods:{async fetchFilm(){const t=await Q(this.$route.params.id);this.film=t.results},async fetchActors(){const t=await S();this.actors=t.results}}};const Lt=(0,u.Z)(jt,[["render",Ot],["__scopeId","data-v-6597ff4a"]]);var Tt=Lt;const Ht=[{path:"/",component:J},{path:"/account",component:ft},{path:"/favorites",component:gt},{path:"/films/:id",component:Tt}],Mt=(0,g.p7)({routes:Ht,history:(0,g.PO)("/kinopoisk-pet/")});var Zt=Mt;const $t=(0,U.WB)(),Pt=(0,s.ri)(_);Pt.use(Zt).use($t).component("svg-icon",a.Z).mount("#app")}},i={};function e(s){var a=i[s];if(void 0!==a)return a.exports;var n=i[s]={exports:{}};return t[s].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(i,s,a,n){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],n=t[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(d--,1);var c=a();void 0!==c&&(i=c)}}return i}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,a,n]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){e.p="/kinopoisk-pet/"}(),function(){var t={143:0};e.O.j=function(i){return 0===t[i]};var i=function(i,s){var a,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(i){return 0!==t[i]}))){for(a in o)e.o(o,a)&&(e.m[a]=o[a]);if(l)var d=l(e)}for(i&&i(s);c<r.length;c++)n=r[c],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(d)},s=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(674)}));s=e.O(s)})();
//# sourceMappingURL=app.2954059c.js.map