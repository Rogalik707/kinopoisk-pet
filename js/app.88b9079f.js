(function(){"use strict";var t={4822:function(t,i,e){var n=e(9242),s=e(9877),r=e(3396);function a(t,i,e,n,s,a){const o=(0,r.up)("NavBar"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(o),(0,r.Wm)(l)])}const o=t=>((0,r.dD)("data-v-2087c8a7"),t=t(),(0,r.Cn)(),t),l={class:"list"},c=o((()=>(0,r._)("li",{class:"link"},"Сериалы",-1)));function u(t,i){const e=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("ul",null,[(0,r.Wm)(e,{class:"link",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Фильмы")])),_:1}),c,(0,r.Wm)(e,{class:"link",to:"/favorites"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Моё")])),_:1}),(0,r.Wm)(e,{class:"link",to:"/account"},{default:(0,r.w5)((()=>[(0,r.Uk)("Аккаунт")])),_:1})])])}var d=e(89);const f={},m=(0,d.Z)(f,[["render",u],["__scopeId","data-v-2087c8a7"]]);var p=m,v={name:"App",components:{NavBar:p}};const h=(0,d.Z)(v,[["render",a]]);var _=h,g=e(2483);const F={class:"search"},k={class:"cards-container",ref:"scrollComponent"},w={class:"observer",ref:"observer"};function b(t,i,e,s,a,o){const l=(0,r.up)("film-card");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",F,[(0,r.wy)((0,r._)("input",{class:"search__input","onUpdate:modelValue":i[0]||(i[0]=t=>a.searchText=t),placeholder:"Название фильма"},null,512),[[n.nr,a.searchText]]),(0,r._)("button",{class:"search__button",onClick:i[1]||(i[1]=(...t)=>o.findFilms&&o.findFilms(...t))},"Найти")]),(0,r._)("div",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.films,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,film:t,onClick:i=>o.openFilmDescription(t.id)},null,8,["film","onClick"])))),128))],512),(0,r._)("div",w,null,512)],64)}e(7658);var y=e(7139);const x={class:"card"},D={class:"card__img"},I=["src"],O={class:"card__body"},j={class:"card__title"},C={class:"description"},T={class:"card__year"},Z={class:"like"};function $(t,i,e,s,a,o){const l=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",D,[(0,r._)("img",{src:e.film?.primaryImage?.url},null,8,I)]),(0,r._)("div",O,[(0,r._)("div",j,[(0,r._)("h4",null,(0,y.zw)(e.film.titleText.text),1)]),(0,r._)("div",C,[(0,r._)("div",T,"("+(0,y.zw)(e.film.releaseDate.year)+")",1)]),(0,r._)("div",Z,[e.film?.favorite?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"like",onClick:i[0]||(i[0]=(0,n.iM)((t=>o.disLikeFilm(e.film.id)),["stop"])),src:a.LikeIcon},null,8,["src"])):((0,r.wg)(),(0,r.j4)(l,{key:1,class:"like",onClick:i[1]||(i[1]=(0,n.iM)((t=>o.likeFilm(e.film.id)),["stop"])),src:a.HeartIcon},null,8,["src"]))])])])}var H=e.p+"img/heart.51d0a13a.svg",L=e.p+"img/redheart.0fbab21c.svg",M=e(1020);const P=(0,M.Q_)("film",{state:()=>({favoriteFilms:[]}),getters:{},actions:{addFavoriteFilm(t){this.favoriteFilms.push(t)},deleteFilm(t){const i=this.favoriteFilms.findIndex((i=>i===t));this.favoriteFilms.splice(i,1)}}});var W={name:"FilmCard",data(){return{HeartIcon:H,LikeIcon:L}},props:{film:{type:Object,required:!0}},methods:{...(0,M.nv)(P,["addFavoriteFilm","deleteFilm"]),likeFilm(t){this.addFavoriteFilm(t),this.$emit("onLike",t)},disLikeFilm(t){this.deleteFilm(t),this.$emit("onDislike",t)}}};const U=(0,d.Z)(W,[["render",$],["__scopeId","data-v-2326c3c0"]]);var Y=U;const A=e(7218),z=A.create({baseURL:"https://moviesdatabase.p.rapidapi.com",headers:{"X-RapidAPI-Key":"e6b3ada70amsh1fb3b5eaa8b96edp1f87c0jsn80262fdc1bff","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}});async function B(t){try{const i=await z.get("/titles",{params:{startYear:"2020",list:"most_pop_movies",page:t}});return i.data}catch(i){console.error(i)}}async function K(t){try{const i=await z.get(`/titles/search/title/${t}`);return i.data}catch(i){console.error(i)}}async function R(t){try{const i=await z.get("/titles/x/titles-by-ids",{params:{idsList:t.join(",")}});return i.data}catch(i){console.error(i)}}async function E(t){try{const i=await z.get(`/titles/${t}`);return i.data}catch(i){console.error(i)}}var N={components:{FilmCard:Y},data(){return{films:[],page:1,searchText:""}},created(){this.fetchFilms(this.page)},mounted(){const t={rootMargin:"0px",threshold:1},i=t=>{t[0].isIntersecting&&this.loadMoreFilms()},e=new IntersectionObserver(i,t);e.observe(this.$refs.observer)},methods:{async fetchFilms(t){const i=await B(t);this.films=i.results},async loadMoreFilms(){this.page+=1;const t=await B(this.page);this.films=[...this.films,...t.results]},async findFilms(){if(this.searchText){const t=await K(this.searchText);this.films=t.results}},openFilmDescription(t){this.$router.push(`/films/${t}`)}}};const X=(0,d.Z)(N,[["render",b],["__scopeId","data-v-278c18f6"]]);var q=X;const Q=t=>((0,r.dD)("data-v-21925946"),t=t(),(0,r.Cn)(),t),V={class:"profile"},G=Q((()=>(0,r._)("div",{class:"profile__img"},null,-1))),J={class:"profile__description"},S=Q((()=>(0,r._)("h1",null,"Machen",-1))),tt={class:"profile__table_box"},it=Q((()=>(0,r._)("li",null,"Просмотренных фильмов: 0",-1))),et=Q((()=>(0,r._)("li",null,"Просмотренных сериалов: 0",-1))),nt=Q((()=>(0,r._)("li",null,"Понравившихся сериалов: 0",-1))),st=Q((()=>(0,r._)("div",{class:"watched_films"},null,-1)));function rt(t,i,e,n,s,a){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",V,[G,(0,r._)("div",J,[S,(0,r._)("div",tt,[(0,r._)("ul",null,[it,(0,r._)("li",null,"Понравившихся фильмов: "+(0,y.zw)(t.favoriteFilms.length),1),et,nt])])])]),st],64)}var at={name:"AccountPage",computed:{...(0,M.rn)(P,["favoriteFilms"])}};const ot=(0,d.Z)(at,[["render",rt],["__scopeId","data-v-21925946"]]);var lt=ot;const ct={class:"cards-container"};function ut(t,i,e,n,s,a){const o=(0,r.up)("film-card");return(0,r.wg)(),(0,r.iD)("div",ct,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.films,(t=>((0,r.wg)(),(0,r.j4)(o,{key:t.id,film:t},null,8,["film"])))),128))])}var dt={components:{FilmCard:Y},data(){return{films:[]}},mounted(){this.fetchFavoriteFilms(this.favoriteFilms)},computed:{...(0,M.rn)(P,["favoriteFilms"])},methods:{...(0,M.nv)(P,["addFavoriteFilm","deleteFilm"]),async fetchFavoriteFilms(t){const i=await R(t);this.films=i.results,this.films&&this.films.forEach((t=>t.favorite=!0))}}};const ft=(0,d.Z)(dt,[["render",ut],["__scopeId","data-v-38e33bb4"]]);var mt=ft;function pt(t,i,e,n,s,a){return(0,r.wg)(),(0,r.iD)("div",null,"film")}var vt={data(){return{film:{}}},name:"DescriptionPage",created(){this.fetchFilm()},methods:{async fetchFilm(){const t=await E(this.$route.params.id);this.film=t.results}}};const ht=(0,d.Z)(vt,[["render",pt]]);var _t=ht;const gt=[{path:"/",component:q},{path:"/account",component:lt},{path:"/favorites",component:mt},{path:"/films/:id",component:_t}],Ft=(0,g.p7)({routes:gt,history:(0,g.PO)("/kinopoisk-pet/")});var kt=Ft;const wt=(0,M.WB)(),bt=(0,n.ri)(_);bt.use(kt).use(wt).component("svg-icon",s.Z).mount("#app")}},i={};function e(n){var s=i[n];if(void 0!==s)return s.exports;var r=i[n]={exports:{}};return t[n].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(i,n,s,r){if(!n){var a=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],r=t[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(o=!1,r<a&&(a=r));if(o){t.splice(u--,1);var c=s();void 0!==c&&(i=c)}}return i}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,s,r]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){e.p="/kinopoisk-pet/"}(),function(){var t={143:0};e.O.j=function(i){return 0===t[i]};var i=function(i,n){var s,r,a=n[0],o=n[1],l=n[2],c=0;if(a.some((function(i){return 0!==t[i]}))){for(s in o)e.o(o,s)&&(e.m[s]=o[s]);if(l)var u=l(e)}for(i&&i(n);c<a.length;c++)r=a[c],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(u)},n=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(4822)}));n=e.O(n)})();
//# sourceMappingURL=app.88b9079f.js.map