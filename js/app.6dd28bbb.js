(function(){"use strict";var t={3461:function(t,i,e){var s=e(9242),n=e(9877),a=e(3396);function r(t,i,e,s,n,r){const o=(0,a.up)("NavBar"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(o),(0,a.Wm)(l)])}const o=t=>((0,a.dD)("data-v-22faa0be"),t=t(),(0,a.Cn)(),t),l={class:"list"},c=o((()=>(0,a._)("li",{class:"link"},"Сериалы",-1)));function d(t,i){const e=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("ul",null,[(0,a.Wm)(e,{class:"link",to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Фильмы")])),_:1}),c,(0,a.Wm)(e,{class:"link",to:"/favorites"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Моё")])),_:1}),(0,a.Wm)(e,{class:"link",to:"/account"},{default:(0,a.w5)((()=>[(0,a.Uk)("Аккаунт")])),_:1})])])}var u=e(89);const m={},f=(0,u.Z)(m,[["render",d],["__scopeId","data-v-22faa0be"]]);var p=f,h={name:"App",components:{NavBar:p}};const v=(0,u.Z)(h,[["render",r]]);var _=v,g=e(678);const w=t=>((0,a.dD)("data-v-c117cb2a"),t=t(),(0,a.Cn)(),t),F={class:"search"},y=["disabled"],b=w((()=>(0,a._)("strong",null,"Найти",-1))),k=[b],O={key:0,class:"cards-container",ref:"scrollComponent"},D={key:1,class:"loader"},x={class:"observer",ref:"observer"};function C(t,i,e,n,r,o){const l=(0,a.up)("select-list"),c=(0,a.up)("film-card");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",F,[(0,a.Wm)(l,{options:r.genres,onOnSelectOption:o.selectGenre},null,8,["options","onOnSelectOption"]),(0,a._)("form",{onSubmit:i[1]||(i[1]=(0,s.iM)(((...t)=>o.findFilms&&o.findFilms(...t)),["prevent"]))},[(0,a.wy)((0,a._)("input",{class:"search__input","onUpdate:modelValue":i[0]||(i[0]=t=>r.searchText=t),placeholder:"Название фильма"},null,512),[[s.nr,r.searchText]]),(0,a._)("button",{class:"search__button",disabled:r.isLoading},k,8,y)],32)]),r.preloader?((0,a.wg)(),(0,a.iD)("span",D)):((0,a.wg)(),(0,a.iD)("div",O,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.films,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,film:t,onClick:i=>o.openFilmDescription(t.id)},null,8,["film","onClick"])))),128))],512)),(0,a._)("div",x,null,512)],64)}e(7658);var L=e(7139);const I={class:"card"},j={class:"card__img"},T=["src"],W={class:"card__body"},Z={class:"card__title"},q={class:"description"},z={class:"card__year"};function A(t,i,e,n,r,o){return(0,a.wg)(),(0,a.iD)("div",I,[(0,a._)("div",j,[(0,a._)("img",{src:e.film?.primaryImage?.url},null,8,T)]),(0,a._)("div",W,[(0,a._)("div",Z,[(0,a._)("h4",null,(0,L.zw)(e.film.originalTitleText.text),1)]),(0,a._)("div",q,[(0,a._)("div",z,(0,L.zw)(e.film.releaseDate?.year),1)]),(0,a._)("div",{class:(0,L.C_)(["like",{"like--active":r.isLiked}]),onClick:i[0]||(i[0]=(0,s.iM)((t=>o.changeFilmStatus(e.film.id)),["stop","prevent"]))},null,2)])])}var S=e(1020);const H=(0,S.Q_)("film",{state:()=>({favoriteFilms:[],watchedFilms:[]}),actions:{addFavoriteFilm(t){this.favoriteFilms.push(t)},deleteFilm(t){const i=this.favoriteFilms.findIndex((i=>i===t));this.favoriteFilms.splice(i,1)},addWatchedFilm(t){this.watchedFilms.includes(t)||this.watchedFilms.push(t)}}});var P={name:"FilmCard",data(){return{isLiked:!1}},props:{film:{type:Object,required:!0}},mounted(){this.film.favorite&&(this.isLiked=!0)},methods:{...(0,S.nv)(H,["addFavoriteFilm","deleteFilm"]),changeFilmStatus(t){this.isLiked?this.deleteFilm(t):this.addFavoriteFilm(t),this.isLiked=!this.isLiked}}};const U=(0,u.Z)(P,[["render",A],["__scopeId","data-v-7123aa60"]]);var Y=U;const $=e(7218),M=$.create({baseURL:"https://moviesdatabase.p.rapidapi.com",headers:{"X-RapidAPI-Key":"e6b3ada70amsh1fb3b5eaa8b96edp1f87c0jsn80262fdc1bff","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}});async function K(t){try{const i=await M.get("/titles",{params:{startYear:"2005",list:"most_pop_movies",page:t}});return i.data}catch(i){console.error(i)}}async function E(t){try{const i=await M.get(`/titles/search/title/${t}`);return i.data}catch(i){console.error(i)}}async function G(t){try{const i=await M.get("/titles/x/titles-by-ids",{params:{idsList:t.join(",")}});return i.data}catch(i){console.error(i)}}async function B(t){try{const i=await M.get(`/titles/${t}`);return i.data}catch(i){console.error(i)}}async function N(){try{const t=await M.get("/actors/random");return t.data}catch(t){console.error(t)}}async function R(){try{const t=await M.get("titles/utils/genres");return t.data}catch(t){console.error(t)}}async function X(t){try{const i=await M.get("/titles",{params:{genre:t}});return i.data}catch(i){console.error(i)}}const Q={class:"select"},V={key:0,class:"select__options"},J=["onClick"];function tt(t,i,e,s,n,r){return(0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("div",{class:"select__input",onClick:i[0]||(i[0]=(...t)=>r.toggleOptions&&r.toggleOptions(...t))},(0,L.zw)(n.currentOption),1),n.isOpened?((0,a.wg)(),(0,a.iD)("div",V,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,((t,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"select__option",key:i,onClick:i=>r.selectOption(t)},(0,L.zw)(t),9,J)))),128))])):(0,a.kq)("",!0)])}var it={name:"SelectList",props:{options:{type:Array,required:!0}},data(){return{isOpened:!1,currentOption:""}},methods:{toggleOptions(){this.isOpened=!this.isOpened},selectOption(t){this.currentOption=t,this.isOpened=!1,this.$emit("onSelectOption",t)}}};const et=(0,u.Z)(it,[["render",tt],["__scopeId","data-v-6c43a564"]]);var st=et,nt={components:{SelectList:st,FilmCard:Y},data(){return{films:[],page:1,searchText:"",isLoading:!1,genres:[],filters:{genre:""},preloader:!1}},created(){this.fetchFilms(this.page)},mounted(){this.fetchGenres();const t={rootMargin:"0px",threshold:1},i=t=>{t[0].isIntersecting&&this.loadMoreFilms()},e=new IntersectionObserver(i,t);e.observe(this.$refs.observer)},watch:{films(){this.checkLikedFilms()}},computed:{...(0,S.rn)(H,["favoriteFilms"])},methods:{...(0,S.nv)(H,["addWatchedFilm"]),async fetchFilms(t){try{this.preloader=!0;const i=await K(t);this.films=i.results}catch(i){alert("error")}finally{this.preloader=!1}},async loadMoreFilms(){this.page+=1;const t=await K(this.page);this.films=[...this.films,...t.results]},async findFilms(){if(this.isLoading=!0,this.filters.genre){const t=await X(this.filters.genre);this.films=t.results}if(this.searchText){const t=await E(this.searchText);this.films=t.results}this.films&&(this.isLoading=!1)},async fetchGenres(){const t=await R();this.genres=t.results},openFilmDescription(t){this.$router.push(`/films/${t}`),this.addWatchedFilm(t)},checkLikedFilms(){this.films.forEach((t=>{this.favoriteFilms.includes(t.id)&&(t.favorite=!0)}))},selectGenre(t){this.filters.genre=t}}};const at=(0,u.Z)(nt,[["render",C],["__scopeId","data-v-c117cb2a"]]);var rt=at;const ot=t=>((0,a.dD)("data-v-8dd7bd14"),t=t(),(0,a.Cn)(),t),lt={class:"profile"},ct=ot((()=>(0,a._)("div",{class:"profile__img"},null,-1))),dt={class:"profile__description"},ut=ot((()=>(0,a._)("h1",null,"Профиль",-1))),mt={class:"profile__table_box"},ft=ot((()=>(0,a._)("li",null,"Просмотренных сериалов: 0",-1))),pt=ot((()=>(0,a._)("li",null,"Понравившихся сериалов: 0",-1))),ht=ot((()=>(0,a._)("div",{class:"watched_films"},null,-1)));function vt(t,i,e,s,n,r){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",lt,[ct,(0,a._)("div",dt,[ut,(0,a._)("div",mt,[(0,a._)("ul",null,[(0,a._)("li",null,"Просмотренных фильмов: "+(0,L.zw)(t.watchedFilms.length),1),(0,a._)("li",null,"Понравившихся фильмов: "+(0,L.zw)(t.favoriteFilms.length),1),ft,pt])])])]),ht],64)}var _t={name:"AccountPage",computed:{...(0,S.rn)(H,["favoriteFilms","watchedFilms"])}};const gt=(0,u.Z)(_t,[["render",vt],["__scopeId","data-v-8dd7bd14"]]);var wt=gt;const Ft={class:"cards-container"};function yt(t,i,e,s,n,r){const o=(0,a.up)("film-card");return(0,a.wg)(),(0,a.iD)("div",Ft,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.films,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.id,film:t},null,8,["film"])))),128))])}var bt={components:{FilmCard:Y},data(){return{films:[]}},mounted(){this.fetchFavoriteFilms(this.favoriteFilms)},computed:{...(0,S.rn)(H,["favoriteFilms"])},methods:{...(0,S.nv)(H,["addFavoriteFilm","deleteFilm"]),async fetchFavoriteFilms(t){const i=await G(t);this.films=i.results,this.films&&this.films.forEach((t=>t.favorite=!0))}}};const kt=(0,u.Z)(bt,[["render",yt],["__scopeId","data-v-6d2b1e38"]]);var Ot=kt;const Dt=t=>((0,a.dD)("data-v-2529c78c"),t=t(),(0,a.Cn)(),t),xt={class:"film"},Ct={class:"film__img"},Lt=["src"],It={class:"film__text_box"},jt={class:"film__title"},Tt=Dt((()=>(0,a._)("div",{class:"film__description"},"В апишке не было описания. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",-1))),Wt={class:"actors"},Zt=Dt((()=>(0,a._)("h3",{class:"actors__header"}," Актеры:",-1)));function qt(t,i,e,s,n,r){return(0,a.wg)(),(0,a.iD)("div",xt,[(0,a._)("div",Ct,[(0,a._)("img",{src:n.film?.primaryImage?.url},null,8,Lt)]),(0,a._)("div",It,[(0,a._)("div",jt,[(0,a._)("h1",null,(0,L.zw)(n.film?.originalTitleText?.text),1)]),Tt]),(0,a._)("div",Wt,[Zt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.actors,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"actors__list",key:t.nconst},(0,L.zw)(t?.primaryName),1)))),128))])])}var zt={data(){return{film:{},actors:[]}},name:"DescriptionPage",created(){this.fetchFilm(),this.fetchActors()},methods:{async fetchFilm(){const t=await B(this.$route.params.id);this.film=t.results},async fetchActors(){const t=await N();this.actors=t.results}}};const At=(0,u.Z)(zt,[["render",qt],["__scopeId","data-v-2529c78c"]]);var St=At;const Ht=[{path:"/",component:rt},{path:"/account",component:wt},{path:"/favorites",component:Ot},{path:"/films/:id",component:St},{path:"/:CatchAll(.*)",component:(0,a.Wm)("h1",null,[(0,a.Uk)("Страничка не найдена :'(")])}],Pt=(0,g.p7)({routes:Ht,history:(0,g.PO)("/kinopoisk-pet/")});var Ut=Pt;const Yt=(0,S.WB)(),$t=(0,s.ri)(_);$t.use(Ut).use(Yt).component("svg-icon",n.Z).mount("#app")}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var a=i[s]={exports:{}};return t[s].call(a.exports,a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(i,s,n,a){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],a=t[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(o=!1,a<r&&(r=a));if(o){t.splice(d--,1);var c=n();void 0!==c&&(i=c)}}return i}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[s,n,a]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={143:0};e.O.j=function(i){return 0===t[i]};var i=function(i,s){var n,a,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(i){return 0!==t[i]}))){for(n in o)e.o(o,n)&&(e.m[n]=o[n]);if(l)var d=l(e)}for(i&&i(s);c<r.length;c++)a=r[c],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(d)},s=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(3461)}));s=e.O(s)})();
//# sourceMappingURL=app.6dd28bbb.js.map