(function(){"use strict";var t={3135:function(t,i,e){var s=e(9242),n=e(9877),r=e(3396);function a(t,i,e,s,n,a){const o=(0,r.up)("NavBar"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(o),(0,r.Wm)(l)])}const o=t=>((0,r.dD)("data-v-2087c8a7"),t=t(),(0,r.Cn)(),t),l={class:"list"},c=o((()=>(0,r._)("li",{class:"link"},"Сериалы",-1)));function d(t,i){const e=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("ul",null,[(0,r.Wm)(e,{class:"link",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Фильмы")])),_:1}),c,(0,r.Wm)(e,{class:"link",to:"/favorites"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Моё")])),_:1}),(0,r.Wm)(e,{class:"link",to:"/account"},{default:(0,r.w5)((()=>[(0,r.Uk)("Аккаунт")])),_:1})])])}var u=e(89);const f={},m=(0,u.Z)(f,[["render",d],["__scopeId","data-v-2087c8a7"]]);var v=m,p={name:"App",components:{NavBar:v}};const h=(0,u.Z)(p,[["render",a]]);var _=h,g=e(2483);const F={class:"search"},b={class:"cards-container",ref:"scrollComponent"},w={class:"observer",ref:"observer"};function k(t,i,e,n,a,o){const l=(0,r.up)("film-card");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",F,[(0,r.wy)((0,r._)("input",{class:"search__input","onUpdate:modelValue":i[0]||(i[0]=t=>a.searchText=t),placeholder:"Название фильма"},null,512),[[s.nr,a.searchText]]),(0,r._)("button",{class:"search__button",onClick:i[1]||(i[1]=(...t)=>o.findFilms&&o.findFilms(...t))},"Найти")]),(0,r._)("div",b,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.films,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.id,film:t},null,8,["film"])))),128))],512),(0,r._)("div",w,null,512)],64)}var y=e(7139);const x={class:"card"},I={class:"card__img"},O=["src"],j={class:"card__body"},D={class:"card__title"},C={class:"description"},T={class:"card__year"},H={class:"like"};function L(t,i,e,s,n,a){const o=(0,r.up)("svg-icon");return(0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",I,[(0,r._)("img",{src:e.film?.primaryImage?.url},null,8,O)]),(0,r._)("div",j,[(0,r._)("div",D,[(0,r._)("h4",null,(0,y.zw)(e.film.titleText.text),1)]),(0,r._)("div",C,[(0,r._)("div",T,"("+(0,y.zw)(e.film.releaseDate.year)+")",1)]),(0,r._)("div",H,[e.film?.favorite?((0,r.wg)(),(0,r.j4)(o,{key:0,class:"like",onClick:i[0]||(i[0]=t=>a.disLikeFilm(e.film.id)),src:n.LikeIcon},null,8,["src"])):((0,r.wg)(),(0,r.j4)(o,{key:1,class:"like",onClick:i[1]||(i[1]=t=>a.likeFilm(e.film.id)),src:n.HeartIcon},null,8,["src"]))])])])}var Z=e.p+"img/heart.51d0a13a.svg",P=e.p+"img/redheart.0fbab21c.svg",W=e(1020);e(7658);const M=(0,W.Q_)("film",{state:()=>({favoriteFilms:[]}),getters:{},actions:{addFavoriteFilm(t){this.favoriteFilms.push(t)},deleteFilm(t){const i=this.favoriteFilms.findIndex((i=>i===t));this.favoriteFilms.splice(i,1)}}});var U={name:"FilmCard",data(){return{HeartIcon:Z,LikeIcon:P}},props:{film:{type:Object,required:!0}},methods:{...(0,W.nv)(M,["addFavoriteFilm","deleteFilm"]),likeFilm(t){this.addFavoriteFilm(t),this.$emit("onLike",t)},disLikeFilm(t){this.deleteFilm(t),this.$emit("onDislike",t)}}};const Y=(0,u.Z)(U,[["render",L],["__scopeId","data-v-b980eda8"]]);var A=Y;const $=e(7218),z=$.create({baseURL:"https://moviesdatabase.p.rapidapi.com",headers:{"X-RapidAPI-Key":"e6b3ada70amsh1fb3b5eaa8b96edp1f87c0jsn80262fdc1bff","X-RapidAPI-Host":"moviesdatabase.p.rapidapi.com"}});async function B(t){try{const i=await z.get("/titles",{params:{startYear:"2020",list:"most_pop_movies",page:t}});return i.data}catch(i){console.error(i)}}async function K(t){try{const i=await z.get(`/titles/search/title/${t}`);return i.data}catch(i){console.error(i)}}async function R(t){try{const i=await z.get("/titles/x/titles-by-ids",{params:{idsList:t.join(",")}});return i.data}catch(i){console.error(i)}}var E={components:{FilmCard:A},data(){return{films:[],page:1,searchText:""}},created(){this.fetchFilms(this.page)},mounted(){const t={rootMargin:"0px",threshold:1},i=t=>{t[0].isIntersecting&&this.loadMoreFilms()},e=new IntersectionObserver(i,t);e.observe(this.$refs.observer)},methods:{async fetchFilms(t){const i=await B(t);this.films=i.results},async loadMoreFilms(){this.page+=1;const t=await B(this.page);this.films=[...this.films,...t.results]},async findFilms(){if(this.searchText){const t=await K(this.searchText);this.films=t.results}}}};const N=(0,u.Z)(E,[["render",k],["__scopeId","data-v-06028761"]]);var X=N;const q=t=>((0,r.dD)("data-v-21925946"),t=t(),(0,r.Cn)(),t),Q={class:"profile"},V=q((()=>(0,r._)("div",{class:"profile__img"},null,-1))),G={class:"profile__description"},J=q((()=>(0,r._)("h1",null,"Machen",-1))),S={class:"profile__table_box"},tt=q((()=>(0,r._)("li",null,"Просмотренных фильмов: 0",-1))),it=q((()=>(0,r._)("li",null,"Просмотренных сериалов: 0",-1))),et=q((()=>(0,r._)("li",null,"Понравившихся сериалов: 0",-1))),st=q((()=>(0,r._)("div",{class:"watched_films"},null,-1)));function nt(t,i,e,s,n,a){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",Q,[V,(0,r._)("div",G,[J,(0,r._)("div",S,[(0,r._)("ul",null,[tt,(0,r._)("li",null,"Понравившихся фильмов: "+(0,y.zw)(t.favoriteFilms.length),1),it,et])])])]),st],64)}var rt={name:"AccountPage",computed:{...(0,W.rn)(M,["favoriteFilms"])}};const at=(0,u.Z)(rt,[["render",nt],["__scopeId","data-v-21925946"]]);var ot=at;const lt={class:"cards-container"};function ct(t,i,e,s,n,a){const o=(0,r.up)("film-card");return(0,r.wg)(),(0,r.iD)("div",lt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.films,(t=>((0,r.wg)(),(0,r.j4)(o,{key:t.id,film:t},null,8,["film"])))),128))])}var dt={components:{FilmCard:A},data(){return{films:[]}},mounted(){this.fetchFavoriteFilms(this.favoriteFilms)},computed:{...(0,W.rn)(M,["favoriteFilms"])},methods:{...(0,W.nv)(M,["addFavoriteFilm","deleteFilm"]),async fetchFavoriteFilms(t){const i=await R(t);this.films=i.results,this.films&&this.films.forEach((t=>t.favorite=!0))}}};const ut=(0,u.Z)(dt,[["render",ct],["__scopeId","data-v-38e33bb4"]]);var ft=ut;const mt=[{path:"/",component:X},{path:"/account",component:ot},{path:"/favorites",component:ft}],vt=(0,g.p7)({routes:mt,history:(0,g.PO)("/")});var pt=vt;const ht=(0,W.WB)(),_t=(0,s.ri)(_);_t.use(pt).use(ht).component("svg-icon",n.Z).mount("#app")}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(i,s,n,r){if(!s){var a=1/0;for(d=0;d<t.length;d++){s=t[d][0],n=t[d][1],r=t[d][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||a>=r)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(o=!1,r<a&&(a=r));if(o){t.splice(d--,1);var c=n();void 0!==c&&(i=c)}}return i}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[s,n,r]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){e.p="/"}(),function(){var t={143:0};e.O.j=function(i){return 0===t[i]};var i=function(i,s){var n,r,a=s[0],o=s[1],l=s[2],c=0;if(a.some((function(i){return 0!==t[i]}))){for(n in o)e.o(o,n)&&(e.m[n]=o[n]);if(l)var d=l(e)}for(i&&i(s);c<a.length;c++)r=a[c],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(d)},s=self["webpackChunkkinopoisk"]=self["webpackChunkkinopoisk"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=e.O(void 0,[998],(function(){return e(3135)}));s=e.O(s)})();
//# sourceMappingURL=app.29a38810.js.map